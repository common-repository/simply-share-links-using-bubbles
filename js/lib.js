function Collection(){this.array=new Array,this.index=0}function Vector(e,t){this.x=e,this.y=t}function Circle(e,t,i){this.x=e,this.y=t,this.radio=i}function Bubble(e,t,i,n,r,s){this.y=t,this.x=e,this.element=i,this.element.id=r,this.directionX="+",this.direction=n,this.directionY=n,this.id=r,this.velocity=s,this.state="NORMAL",this.advanceX=0,this.advanceY=0,this.centerX=0,this.centerY=0,this.radio=0,this.aceleration=0,this.chock=!1,this.points=new Collection,this.circle}function checkBound(){if(!nobound){var e=new Date;if(e>=currentTime)return clearInterval(getedId),jQuery(".bubble").html(""),!1}return!0}function GetScreenerParams(){screener.width=jQuery(document).width()-20,screener.height=jQuery(document).height(),console.log("width: "+screener.width),console.log("height: "+screener.height)}function adjustBubbleText(){jQuery(".bubble").show();var e=screener.width/10,t=(jQuery(".bubble"),jQuery(".bubble").children("p"));parseInt(jQuery(t[0]).height())<=30?jQuery(t[0]).css("padding","50px 3px 25px 7px"):parseInt(jQuery(t[0]).height())>30&&jQuery(t[0]).css("padding","25px 3px 25px 7px");var i=-200,n=e*(9*Math.random()+1)-jQuery(".bubble").width();jQuery(".bubble").css("top",i+"px"),jQuery(".bubble").css("left",n+"px");var r=new Bubble(n,-200,jQuery(".bubble"),"+",0,parseInt(4*Math.random()),parseInt(jQuery(".bubble").width()),parseInt(jQuery(".bubble").height()));list.add(r),getedId=setInterval(MoveBubbles,50)}function MoveBubbles(){for(var e=0;e<list.length();e++)if(checkBound()){var t=list.getBubble(e);"+"==t.direction?moveBubble(t):moveBubbleUp(t)}}function moveBubble(e){checkLimits(e),checkForObstacles(e)&&e.setDirection("-"),e.UpdateElement()}function moveBubbleUp(e,t,i){checkLimits(e),parseInt(e.element.offset().top)>0||e.setDirection("+"),e.UpdateElement()}function checkForObstacles(e){for(var t=e.element.offset().top<screener.height-e.element.height()-10,i=0;i<obstacles.length();i++){var n=obstacles.getElement(i),r=e.element.offset().top<n.offset().top-e.element.height(),s=e.element.offset().left>n.offset().left&&e.element.offset().left<n.offset().left+n.width();if(1==s)return!r}return!t}function checkRigthLimit(e){e.element.offset().left-(screener.width-e.element.width())>=0&&(e.directionX="-")}function checkLeftLimit(e){e.element.offset().left<=0&&(e.directionX="+")}function checkLimits(e){checkLeftLimit(e),checkRigthLimit(e)}function checkColisions(e){for(var t=list.getBubble(e),i=0;i<list.length();i++)if(i!=e){var n=list.getBubble(i);t.checkColision(n)&&!t.chock&&(t.newDirectionX(n),t.newDirectionY(n),n.newDirectionX(t),n.newDirectionY(t),t.UpdateElement(),n.UpdateElement())}}function startColisions(){for(var e=0;e<list.length();e++){var t=list.getBubble(e);t.chock=!0}}var obstacles={index:0,list:[],add:function(e){this.list[this.index]=e,this.index+=1},getElement:function(e){return this.list[e]},length:function(){return this.index}};Collection.prototype.getElement=function(e){return this.array[e]},Collection.prototype.length=function(){return this.index},Collection.prototype.add=function(e){this.array[this.index]=e,this.index+=1},Circle.prototype.isPointOfCercle=function(e){var t=e.x-this.x,i=e.y-this.y;return result=parseInt(Math.sqrt(t*t+i*i)),result<this.radio},Circle.prototype.hasPoints=function(e){for(var t=!1,i=0;i<e.length();i++)if(this.isPointOfCercle(e.getElement(i))){t=!0;break}return t},Bubble.prototype.init=function(){this.centerX=parseInt(this.element.offset().left+this.element.width()/2),this.centerY=parseInt(this.element.offset().top+this.element.height()/2),this.radio=parseInt(Math.sqrt(this.centerX*this.centerX+this.centerY*this.centerY))},Bubble.prototype.currentVelocity=function(){return this.velocity+this.aceleration},Bubble.prototype.updateX=function(){this.advanceX=1*this.currentVelocity()+1},Bubble.prototype.updateY=function(){1*this.currentVelocity()+1;this.advanceY=1*this.currentVelocity()+1},Bubble.prototype.UpdateCoordinates=function(){switch(this.direction){case"+":this.x+=this.advanceX,this.y+=this.advanceY;break;case"-":this.x-=this.advanceX,this.y-=this.advanceY}this.init()},Bubble.prototype.accelerate=function(){this.chock=!0,this.acceleration=3},Bubble.prototype.desaccelerate=function(){this.acceleration>0?this.acceleration-=1:this.chock=!1},Bubble.prototype.UpdateElement=function(){this.updateX(),this.updateY(),jQuery(this.element).css("top",this.directionY+"="+this.advanceY),jQuery(this.element).css("left",this.directionX+"="+this.advanceX),this.UpdateCoordinates()},Bubble.prototype.setState=function(e){this.state=e},Bubble.prototype.checkColision=function(e){if(this.chock){var t=Math.sqrt((e.centerX-this.centerX)*(e.centerX-this.centerX)+(e.centerY-this.centerY)*(e.centerY-this.centerY))<this.radio+e.radio;return t}return!1},Bubble.prototype.newDirectionX=function(e){"+"==this.directionX?this.directionX="-":e.directionX="+",e.accelerate()},Bubble.prototype.newDirectionY=function(e){"+"==this.directionY?this.directionY="-":this.directionY="+",e.accelerate()},Bubble.prototype.setDirection=function(e){this.direction=e,this.directionY=e};var nobound=!0,currentTime=new Date,obstacles=obstacles||{},getedId=0,screener={},bubblesId=[],bubblesVelocity=[],list={index:0,lista:[],add:function(e){this.lista[this.index]=e,this.index+=1},getBubble:function(e){return this.lista[e]},length:function(){return this.index}};!function(e){e(document).ready(function(){jQuery(".bubble").hide(),GetScreenerParams(),obstacles.add(e("#tope"))})}(jQuery);